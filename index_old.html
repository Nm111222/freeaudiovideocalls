<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Manual-Signaling WebRTC — Audio/Video (GitHub Pages)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body {
        font-family: Inter, system-ui, Segoe UI, Arial;
        margin: 18px;
        max-width: 1100px;
      }
      h1 {
        font-size: 20px;
      }
      .row {
        display: flex;
        gap: 12px;
        align-items: flex-start;
        flex-wrap: wrap;
      }
      .panel {
        border: 1px solid #ddd;
        padding: 12px;
        border-radius: 8px;
        background: #fafafa;
        min-width: 260px;
      }
      video {
        background: #000;
        border-radius: 6px;
        width: 320px;
        height: 240px;
        object-fit: cover;
      }
      #remotes video {
        width: 240px;
        height: 180px;
      }
      textarea {
        width: 100%;
        height: 120px;
      }
      button {
        padding: 8px 10px;
        margin: 6px 4px;
      }
      label {
        font-weight: 600;
        font-size: 13px;
      }
      .small {
        font-size: 12px;
        color: #555;
      }
      .peer-list {
        margin-top: 8px;
      }
      .peer-item {
        border: 1px dashed #eee;
        padding: 8px;
        margin-bottom: 8px;
        border-radius: 6px;
      }
    </style>
  </head>
  <body>
    <h1>WebRTC (Manual signaling) — Audio & Video — 1:1 & Group (mesh)</h1>

    <div class="row">
      <div class="panel" style="flex: 1 1 320px">
        <label>Local preview</label>
        <div>
          <video id="localVideo" autoplay muted playsinline></video>
        </div>
        <div style="margin-top: 8px">
          <button id="startBtn">Start Camera & Mic</button>
          <button id="muteAudioBtn" disabled>Mute Audio</button>
          <button id="toggleCamBtn" disabled>Camera Off</button>
          <button id="stopBtn" disabled>End All</button>
        </div>
        <div class="small">
          Tip: use https (GitHub Pages) or localhost to allow camera/mic.
        </div>
      </div>

      <div class="panel" style="flex: 1 1 420px">
        <label>Create / Manage Peer Connections</label>
        <div style="margin-top: 8px">
          <input
            id="peerName"
            placeholder="Peer name (e.g. Alice)"
            style="padding: 8px; width: 60%"
          />
          <button id="createPeerBtn">Create PeerConnection</button>
        </div>

        <div class="peer-list" id="peerList"></div>
        <div class="small">
          For each remote participant create a PeerConnection entry. Then use
          the controls inside each peer box to generate offer/answer and
          exchange SDPs and ICE candidates manually.
        </div>
      </div>
    </div>

    <h3>Remote videos</h3>
    <div id="remotes" class="row"></div>

    <h3>How to connect (quick)</h3>
    <ol>
      <li>Start camera & mic (Start Camera & Mic button).</li>
      <li>
        On each browser **Create PeerConnection** and give a peer name for *each
        remote person* you want to connect (one entry per remote).
      </li>
      <li>
        On initiator side: click **Create Offer → Copy Offer** and send the
        offer text to target person.
      </li>
      <li>
        On recipient: paste the Offer into **Remote SDP** field in their
        matching peer box and click **Handle Remote Offer (Create Answer)** →
        then copy the Answer and send back to initiator.
      </li>
      <li>
        Initiator: paste Answer into **Remote SDP** and click **Handle Remote
        Answer**. Once both sides have set descriptions, they will exchange ICE
        candidates — copy/paste ICE candidates as they appear.
      </li>
    </ol>

    <script src="webrtc-manual.js"></script>
  </body>
</html>
